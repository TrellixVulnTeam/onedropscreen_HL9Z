{"ast":null,"code":"import _toConsumableArray from\"/home/vrdevchris/rappaSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(props){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var removeFromCartHandler=function removeFromCartHandler(productId){dispatch(removeFromCart(productId));};useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var checkoutHandler=function checkoutHandler(){props.history.push(\"/signin?redirect=shipping\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-list-container\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\" Shopping Cart \"}),/*#__PURE__*/_jsx(\"div\",{children:\" Price \"})]}),cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"product\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-name\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+item.product,children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-qty\",children:[\" Qty\",/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,e.target.value));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:\"Delete\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[\"$\",item.price]})]},Math.random().toString(36).substr(2,9));})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-action\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal ( \",cartItems.reduce(function(a,c){return a+c.qty;},0),\" items) :\",/*#__PURE__*/_jsx(\"br\",{}),\"$ \",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)]}),/*#__PURE__*/_jsx(\"button\",{onClick:checkoutHandler,className:\"button primary full-width\",disabled:cartItems.length===0,children:\"Proceed to Checkout\"})]})]});}export default CartScreen;","map":{"version":3,"sources":["/home/vrdevchris/rappaSite/frontend/src/Screens/CartScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","addToCart","removeFromCart","CartScreen","props","cart","state","cartItems","productId","match","params","id","qty","location","search","Number","split","dispatch","removeFromCartHandler","checkoutHandler","history","push","length","map","item","image","product","name","e","target","value","Array","countInStock","keys","x","price","Math","random","toString","substr","reduce","a","c"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { addToCart, removeFromCart } from '../actions/cartActions';\n\nfunction CartScreen (props) {\n\n    const cart =  useSelector(state => state.cart);\n    const {cartItems} = cart;\n\n    const productId = props.match.params.id;\n    const qty = props.location.search ? Number(props.location.search.split(\"=\")[1]) : 1;\n    const dispatch = useDispatch();\n    const removeFromCartHandler = (productId) => {\n        dispatch(removeFromCart(productId));\n    }\n\n    useEffect(() => {\n        if(productId){\n            dispatch(addToCart(productId, qty));\n        }\n    }, [dispatch, productId, qty])\n\n    const checkoutHandler = () => {\n        props.history.push(\"/signin?redirect=shipping\");\n    }\n\n    return <div className=\"cart\">\n        <div className=\"cart-list\">\n            <ul className=\"cart-list-container\">\n                <li>\n                <div> Shopping Cart </div>\n                <div> Price </div>\n                </li>\n                    {\n                        cartItems.length === 0 ?\n                        <div>\n                            Cart is empty\n                        </div>\n                        :\n                        cartItems.map(item =>\n                            <li key={ Math.random().toString(36).substr(2,9)}>\n                              <div className = \"cart-image\">\n                                <img src={item.image} alt=\"product\" />\n                              </div>\n                              <div className=\"cart-name\">\n                                  <div>\n                                      <Link to={\"/product/\" + item.product}>\n                                        {item.name}\n                                      </Link>\n                                  </div>\n                                  <div>\n                                        <div className=\"cart-qty\"> Qty\n                        \n                                        <select value={item.qty} onChange={(e) => dispatch(addToCart(item.product, e.target.value))}>\n                                            {[...Array(item.countInStock).keys()].map(x =>\n                                                <option key={x + 1} value={x + 1}>{x + 1}</option>\n                                            )}\n                                        </select>\n                                        </div>\n                                        <div>\n                                        <button type=\"button\" className =\"button\" onClick={() =>removeFromCartHandler(item.product)}>\n                                          Delete\n                                      </button>\n                                      </div>\n                                  </div>\n                              </div>\n                              <div className = \"cart-price\">\n                                  ${item.price}\n                              </div>\n                          </li>  \n                            )\n                    }\n            </ul>\n        </div>\n        <div className=\"cart-action\">\n            <h3>\n                Subtotal ( {cartItems.reduce((a, c) => a + c.qty, 0)} items)\n                :<br></br>\n                $ {cartItems.reduce((a,c) => a + c.price * c.qty, 0)}\n            </h3>\n            <button onClick={checkoutHandler} className=\"button primary full-width\" disabled={cartItems.length === 0}>\n                Proceed to Checkout\n            </button>\n\n        </div>\n    </div>\n}\n\nexport default CartScreen;\n"]},"metadata":{},"sourceType":"module"}