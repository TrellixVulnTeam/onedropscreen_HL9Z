{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var orderDetails=useSelector(function(state){return state.orderDetails;});console.log(orderDetails);var cartItems=cart.cartItems,shipping=cart.shipping,payment=cart.payment;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);var shippingPrice=itemsPrice>100?0:10;var taxPrice=0.15*itemsPrice;var totalPrice=itemsPrice+shippingPrice+taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){console.log(\"this is the placeOrderHandler\");dispatch(createOrder({orderItems:cartItems,shipping:shipping,payment:payment,itemsPrice:itemsPrice,shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,order,props.history,success]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"placeorder\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"placeorder-info\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[cart.shipping.address,\", \",cart.shipping.city,\", \",cart.shipping.state,cart.shipping.zipCode,\", \",cart.shipping.country]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Payment\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Payment Method: \",cart.payment.paymentMethod]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-list-container\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Price\"})]}),cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"product\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-name\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+item.product,children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Qty: \",item.qty]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[\"$\",item.price]})]},Math.random().toString(36).substr(2,9));})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"placeorder-action\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler,children:\"Place Order\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",itemsPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",shippingPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",taxPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Order Total\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",totalPrice]})]})]})})]})]});}export default PlaceOrderScreen;","map":{"version":3,"sources":["/home/vrdevchris/rappaSite/frontend/src/Screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","CheckoutSteps","createOrder","ORDER_CREATE_RESET","PlaceOrderScreen","props","cart","state","orderCreate","loading","success","error","order","orderDetails","console","log","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","city","zipCode","country","length","map","item","image","product","name","Math","random","toString","substr"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { createOrder } from '../actions/orderActions';\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\n\nfunction PlaceOrderScreen(props) {\n\n    const cart =  useSelector(state => state.cart);\n    const orderCreate = useSelector(state => state.orderCreate);\n    const { loading, success, error, order } = orderCreate;\n    const orderDetails = useSelector((state) => state.orderDetails);\n    console.log(orderDetails);\n\n    const { cartItems, shipping, payment } = cart;\n    if(!shipping.address){\n        props.history.push(\"/shipping\")\n    } else if (!payment.paymentMethod) {\n        props.history.push(\"/payment\")\n    }\n\n    const itemsPrice = cartItems.reduce((a, c) => a + c.price*c.qty, 0);\n    const shippingPrice = itemsPrice > 100 ? 0 : 10;\n    const taxPrice = 0.15 * itemsPrice;\n    const totalPrice = itemsPrice + shippingPrice + taxPrice;\n\n    const dispatch = useDispatch();\n\n    const placeOrderHandler = () =>{\n        console.log(\"this is the placeOrderHandler\")\n        dispatch(createOrder({\n            orderItems:\n            cartItems, \n            shipping, \n            payment, \n            itemsPrice, \n            shippingPrice, \n            taxPrice, \n            totalPrice\n        }))\n    }\n\n    useEffect(() => {\n        if(success){\n            props.history.push(`/order/${order._id}`);\n            dispatch({ type: ORDER_CREATE_RESET })\n        }\n\n    }, [dispatch, order, props.history, success]);\n\n    return <div>\n        <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n        <div className=\"placeorder\">\n            <div className=\"placeorder-info\">\n                <div>\n                    <h3>\n                        Shipping\n                    </h3>\n                    <div>\n                        {cart.shipping.address}, {cart.shipping.city}, {cart.shipping.state}\n                        {cart.shipping.zipCode}, {cart.shipping.country}\n                    </div>\n                </div>\n                <div>\n                    <h3>Payment</h3>\n                    <div>\n                        Payment Method: {cart.payment.paymentMethod}\n                    </div>\n                </div>\n                <div>\n                    <ul className=\"cart-list-container\">\n                        <li>\n                            <h3>\n                                Shopping Cart\n                            </h3>\n                        \n                        <div>\n                            Price\n                        </div>\n                        </li>\n                            {\n                                cartItems.length === 0 ?\n                                <div>\n                                    Cart is empty\n                                </div>\n                                :\n                                cartItems.map(item =>\n                                <li key={ Math.random().toString(36).substr(2,9)}>\n                                    <div className = \"cart-image\">\n                                        <img src={item.image} alt=\"product\" />\n                                    </div>\n                                    <div className=\"cart-name\">\n                                        <div>\n                                            <Link to={\"/product/\" + item.product}>\n                                                {item.name}\n                                            </Link>\n                                        </div>\n                                        <div>\n                                            Qty: {item.qty}\n                                        </div>\n                                    </div>\n                                    <div className = \"cart-price\">\n                                        ${item.price}\n                                    </div>\n                                </li>  \n                                    )\n                            }\n                    </ul>\n                </div>    \n            </div>\n            <div className=\"placeorder-action\">\n                <ul>\n                    <li>\n                        <button className= \"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\n                    </li>\n                    <li>\n                       <h3>Order Summary</h3> \n                    </li>\n                    <li>\n                        <div>Items</div>\n                        <div>${itemsPrice}</div>\n                    </li>\n                    <li>\n                        <div>Shipping</div>\n                        <div>${shippingPrice}</div>\n                    </li>\n                    <li>\n                        <div>Tax</div>\n                        <div>${taxPrice}</div>\n                    </li>\n                    <li>\n                        <div>Order Total</div>\n                        <div>${totalPrice}</div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    \n}\n\nexport default PlaceOrderScreen;\n"]},"metadata":{},"sourceType":"module"}